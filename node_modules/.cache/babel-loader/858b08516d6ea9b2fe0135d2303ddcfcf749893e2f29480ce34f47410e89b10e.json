{"ast":null,"code":"import _slicedToArray from\"D:/WebD/React/Selling Platform/kgpsellex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{NavLink,useNavigate}from\"react-router-dom\";import{getStorage,ref as stgRef,getDownloadURL}from\"firebase/storage\";import{getDatabase,ref as databaseRef,set}from\"firebase/database\";import\"./SellCards.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var writeUserData=function writeUserData(name,rollno,hall,email,phno,descp,amt,product,peopleCount){var db=getDatabase();// console.log(db);\nset(databaseRef(db,\"items/\"+rollno),{username:name,email:email,rollno:rollno,hall:hall,phno:phno,descp:descp,amt:amt,product:product,status:\"open\",people:peopleCount});// console.log(rollNoState);\n};function SellCards(props){var storage=getStorage();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),imageURL=_useState2[0],setImageURL=_useState2[1];var navigate=useNavigate();var _useState3=useState(\"like\"),_useState4=_slicedToArray(_useState3,2),likeButtonState=_useState4[0],setLikeButtonState=_useState4[1];var fetchImage=function fetchImage(rollno){getDownloadURL(stgRef(storage,\"images/\".concat(props.rollno))).then(function(url){setImageURL(url);}).catch(function(){navigate(\"/\");setTimeout(function(){alert(\"No products available currently.\");},1000);});};fetchImage();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"custom-card-margin\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container box-shadow-card mb-4 \",children:/*#__PURE__*/_jsx(\"div\",{className:\"row custom-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 custom-flex \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-2\",children:imageURL===\"\"?/*#__PURE__*/_jsx(\"div\",{className:\"full-width\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\"})}):/*#__PURE__*/_jsx(\"img\",{src:imageURL,className:\" product-img my-4\",alt:\"...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-2\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Seller\"}),/*#__PURE__*/_jsx(\"p\",{children:props.seller},props.seller),/*#__PURE__*/_jsx(\"h6\",{children:\"Product Type\"}),/*#__PURE__*/_jsx(\"p\",{children:props.pdtype},props.pdtype),/*#__PURE__*/_jsx(\"h6\",{children:\"Product Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:props.descp},props.descp),/*#__PURE__*/_jsx(\"h6\",{children:\"Selling Price(INR)\"}),/*#__PURE__*/_jsx(\"p\",{children:props.price},props.price),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[props.status===\"close\"?/*#__PURE__*/_jsx(NavLink,{to:\"\",className:\"btn-get-started-danger mx-2 my-3 d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"s\",{children:\"CLOSED\"})}):/*#__PURE__*/_jsx(NavLink,{to:\"\",className:\"btn-get-started-success mx-2 my-3 d-flex align-items-center\",onClick:function onClick(){alert(\"Oops! Sorry, for our incapacity to initiate payment for the time being. We are still working on it. Just instead click on contact and try emailing the seller to avail the product.\");},children:\"BUY\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){navigate(\"/email\",{state:{name:props.seller,email:props.email}});},className:\"btn-get-started mx-2 my-3\",children:\"CONTACT\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-get-interested mx-2 my-3\",children:/*#__PURE__*/_jsxs(\"i\",{class:\"fa-solid fa-user\",children:[\"\\xA0\\xA0\\xA0\\xA0\",props.people]})}),likeButtonState===\"like\"?/*#__PURE__*/_jsx(\"button\",{className:\"btn-like-dislike mx-2 my-3\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-regular fa-thumbs-up\",onClick:function onClick(){// setPeople(people + 1);\nsetLikeButtonState(\"dislike\");writeUserData(props.seller,props.rollno,props.hall,props.email,props.phno,props.descp,props.price,props.pdtype,props.people+1);}})}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-like-dislike mx-2 my-3\",onClick:function onClick(){// setPeople(people - 1 <= 0 ? 0 : people - 1);\nsetLikeButtonState(\"like\");writeUserData(props.seller,props.rollno,props.hall,props.email,props.phno,props.descp,props.price,props.pdtype,props.people-1<=0?0:props.people-1);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-regular fa-thumbs-down\"})})]})]})]})]})})})})});}export default SellCards;","map":{"version":3,"names":["React","useState","NavLink","useNavigate","getStorage","ref","stgRef","getDownloadURL","getDatabase","databaseRef","set","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","writeUserData","name","rollno","hall","email","phno","descp","amt","product","peopleCount","db","username","status","people","SellCards","props","storage","_useState","_useState2","_slicedToArray","imageURL","setImageURL","navigate","_useState3","_useState4","likeButtonState","setLikeButtonState","fetchImage","concat","then","url","catch","setTimeout","alert","children","className","role","src","alt","seller","pdtype","price","to","onClick","state","class"],"sources":["D:/WebD/React/Selling Platform/kgpsellex/src/components/SellCards.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport { getStorage, ref as stgRef, getDownloadURL } from \"firebase/storage\";\r\nimport { getDatabase, ref as databaseRef, set } from \"firebase/database\";\r\nimport \"./SellCards.css\";\r\n\r\nconst writeUserData = (\r\n  name,\r\n  rollno,\r\n  hall,\r\n  email,\r\n  phno,\r\n  descp,\r\n  amt,\r\n  product,\r\n  peopleCount\r\n) => {\r\n  const db = getDatabase();\r\n  // console.log(db);\r\n  set(databaseRef(db, \"items/\" + rollno), {\r\n    username: name,\r\n    email: email,\r\n    rollno: rollno,\r\n    hall: hall,\r\n    phno: phno,\r\n    descp: descp,\r\n    amt: amt,\r\n    product: product,\r\n    status: \"open\",\r\n    people: peopleCount,\r\n  });\r\n\r\n  // console.log(rollNoState);\r\n};\r\n\r\nfunction SellCards(props) {\r\n  const storage = getStorage();\r\n  const [imageURL, setImageURL] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const [likeButtonState, setLikeButtonState] = useState(\"like\");\r\n\r\n  const fetchImage = (rollno) => {\r\n    getDownloadURL(stgRef(storage, `images/${props.rollno}`))\r\n      .then((url) => {\r\n        setImageURL(url);\r\n      })\r\n      .catch(() => {\r\n        navigate(\"/\");\r\n        setTimeout(() => {\r\n          alert(\"No products available currently.\");\r\n        }, 1000);\r\n      });\r\n  };\r\n\r\n  fetchImage();\r\n\r\n  return (\r\n    <>\r\n      <div className=\"custom-card-margin\">\r\n        <div className=\"container box-shadow-card mb-4 \">\r\n          <div className=\"row custom-flex\">\r\n            <div className=\"col-md-6 custom-flex \">\r\n              <div className=\"d-flex justify-content-center m-2\">\r\n                {imageURL === \"\" ? (\r\n                  <div className=\"full-width\">\r\n                    <div\r\n                      className=\"spinner-border text-primary\"\r\n                      role=\"status\"\r\n                    ></div>\r\n                  </div>\r\n                ) : (\r\n                  <img src={imageURL} className=\" product-img my-4\" alt=\"...\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"m-2\">\r\n                <h6>Seller</h6>\r\n                <p key={props.seller}>{props.seller}</p>\r\n                {/* <h6>Roll Number</h6>\r\n                <p key={props.rollno}>{props.rollno}</p>\r\n                <h6>Hall</h6>\r\n                <p key={props.hall}>{props.hall}</p>\r\n                <h6>Email Address</h6>\r\n                <p key={props.email}>{props.email}</p>\r\n                <h6>Phone Number</h6>\r\n                <p key={props.phno}>{props.phno}</p> */}\r\n                <h6>Product Type</h6>\r\n                <p key={props.pdtype}>{props.pdtype}</p>\r\n                <h6>Product Description</h6>\r\n                <p className=\"card-text\" key={props.descp}>\r\n                  {props.descp}\r\n                </p>\r\n                <h6>Selling Price(INR)</h6>\r\n                <p key={props.price}>{props.price}</p>\r\n\r\n                <div className=\"d-flex flex-column\">\r\n                  <div className=\"d-flex flex-row\">\r\n                    {props.status === \"close\" ? (\r\n                      <NavLink\r\n                        to=\"\"\r\n                        className=\"btn-get-started-danger mx-2 my-3 d-flex align-items-center\"\r\n                      >\r\n                        <s>CLOSED</s>\r\n                      </NavLink>\r\n                    ) : (\r\n                      <NavLink\r\n                        to=\"\"\r\n                        className=\"btn-get-started-success mx-2 my-3 d-flex align-items-center\"\r\n                        onClick={()=>{alert(\"Oops! Sorry, for our incapacity to initiate payment for the time being. We are still working on it. Just instead click on contact and try emailing the seller to avail the product.\")}}\r\n                      >\r\n                        \r\n                        BUY\r\n                      </NavLink>\r\n                    )}\r\n                    <button\r\n                      onClick={() => {\r\n                        navigate(\"/email\", {\r\n                          state: { name: props.seller, email: props.email },\r\n                        });\r\n                      }}\r\n                      className=\"btn-get-started mx-2 my-3\"\r\n                    >\r\n                      CONTACT\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"d-flex flex-row\">\r\n                    <button className=\"btn-get-interested mx-2 my-3\">\r\n                      <i class=\"fa-solid fa-user\">\r\n                        &nbsp;&nbsp;&nbsp;&nbsp;{props.people}\r\n                      </i>\r\n                    </button>\r\n                    {likeButtonState === \"like\" ? (\r\n                      <button className=\"btn-like-dislike mx-2 my-3\">\r\n                        <i\r\n                          class=\"fa-regular fa-thumbs-up\"\r\n                          onClick={() => {\r\n                            // setPeople(people + 1);\r\n                            setLikeButtonState(\"dislike\");\r\n                            writeUserData(\r\n                              props.seller,\r\n                              props.rollno,\r\n                              props.hall,\r\n                              props.email,\r\n                              props.phno,\r\n                              props.descp,\r\n                              props.price,\r\n                              props.pdtype,\r\n                              props.people + 1\r\n                            );\r\n                          }}\r\n                        ></i>\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        className=\"btn-like-dislike mx-2 my-3\"\r\n                        onClick={() => {\r\n                          // setPeople(people - 1 <= 0 ? 0 : people - 1);\r\n                          setLikeButtonState(\"like\");\r\n                          writeUserData(\r\n                            props.seller,\r\n                            props.rollno,\r\n                            props.hall,\r\n                            props.email,\r\n                            props.phno,\r\n                            props.descp,\r\n                            props.price,\r\n                            props.pdtype,\r\n                            (props.people - 1 <= 0)?0:props.people - 1\r\n                          );\r\n                        }}\r\n                      >\r\n                        <i class=\"fa-regular fa-thumbs-down\"></i>\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SellCards;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}